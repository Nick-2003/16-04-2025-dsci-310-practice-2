---
title: "Tutorial 6: Refactoring R Code"
---

# Introduction

In this tutorial, you will refactor the code into separate scripts corresponding to each section. The dataset we will use comes from the `palmerpenguins` package, which contains measurements of penguins from three species. The results are displayed in 

## Load Libraries and Data

```{r setup}
#| echo: false
#| tbl-cap: Intial penguins model.
# Run 01_load_data.R
library(tidyverse)
data <- readr::read_csv("~/work/data/penguins.csv")
knitr::kable(head(data))
```

# Methods

In this section, we perform exploratory data analysis (EDA) and prepare the data for modeling.

```{r methods}
#| echo: false
#| tbl-cap: EDA for penguins model.
# Run 02_methods.R
model_data <- readr::read_csv("~/work/data/penguins_model.csv") %>%
  dplyr::mutate(species = as.factor(species))
knitr::kable(head(model_data))
```

# Model

We will fit a classification model using `tidymodels` to predict the species of a penguin based on its physical characteristics.

```{r model}
#| echo: false
#| tbl-cap: Classification model.
# Run 03_model.R
penguin_fit <- readr::read_rds("~/work/output/penguin_fit.RDS")
knitr::kable(summary(penguin_fit))
```

# Results

We evaluate the performance of the model using the test dataset.

```{r results}
#| echo: false
#| tbl-cap: Model performance.
# Run 04_results.R
conf_mat <- readr::read_rds("~/work/output/conf_mat.RDS") 
knitr::kable(conf_mat$table)
```

# Package Installation

We test out the output of the package `regexcite20250416`.

```{r pack}
#| echo: false
#| tbl-cap: Package usage.
# Run 05_package.R
func_outputs <- readr::read_csv("~/work/output/func_outputs.csv")
knitr::kable(func_outputs)
```

# Conclusion

In this tutorial, we:

- Loaded and cleaned the `palmerpenguins` dataset.
- Performed exploratory data analysis.
- Built a k-Nearest Neighbors classification model using `tidymodels`.
- Evaluated the model's performance.
